{"ast":null,"code":"var _jsxFileName = \"D:\\\\My Projects\\\\Real-Time IoT Dashboard with AI Analytics using MQTT\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\n// src/App.js\nimport React, { useEffect, useState, useRef } from 'react';\nimport { io } from 'socket.io-client';\nimport axios from 'axios';\nimport { Line } from 'react-chartjs-2';\nimport 'chart.js/auto';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BACKEND = process.env.REACT_APP_BACKEND || 'http://localhost:4000';\nfunction App() {\n  _s();\n  const [live, setLive] = useState(null);\n  const [history, setHistory] = useState([]);\n  const [alerts, setAlerts] = useState([]);\n  const socketRef = useRef();\n  useEffect(() => {\n    // fetch history once\n    axios.get(`${BACKEND}/api/history?limit=200`).then(r => setHistory(r.data)).catch(console.error);\n    axios.get(`${BACKEND}/api/alerts`).then(r => setAlerts(r.data)).catch(console.error);\n    // socket\n    socketRef.current = io(BACKEND);\n    socketRef.current.on('sensor_data', data => {\n      setLive(data);\n      setHistory(prev => {\n        const next = [...prev, data];\n        if (next.length > 300) next.shift();\n        return next;\n      });\n    });\n    socketRef.current.on('alert', a => setAlerts(prev => [a, ...prev].slice(0, 50)));\n    return () => socketRef.current.disconnect();\n  }, []);\n  const temps = history.map(h => h.temperature || null);\n  const labels = history.map(h => new Date(h.timestamp).toLocaleTimeString());\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 20,\n      fontFamily: 'Arial'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Real\\u2011Time IoT Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: 20\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Live Reading\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n          children: JSON.stringify(live, null, 2)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Temperature (last \", temps.length, \" points)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Line, {\n          data: {\n            labels,\n            datasets: [{\n              label: 'Temperature',\n              data: temps,\n              fill: false\n            }]\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: 320\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Alerts\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: alerts.slice(0, 20).map((a, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: a.message || JSON.stringify(a)\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 45\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"jvCewYj59R63skxXBTA75QcewAI=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","useRef","io","axios","Line","jsxDEV","_jsxDEV","BACKEND","process","env","REACT_APP_BACKEND","App","_s","live","setLive","history","setHistory","alerts","setAlerts","socketRef","get","then","r","data","catch","console","error","current","on","prev","next","length","shift","a","slice","disconnect","temps","map","h","temperature","labels","Date","timestamp","toLocaleTimeString","style","padding","fontFamily","children","fileName","_jsxFileName","lineNumber","columnNumber","display","gap","flex","JSON","stringify","datasets","label","fill","width","i","message","_c","$RefreshReg$"],"sources":["D:/My Projects/Real-Time IoT Dashboard with AI Analytics using MQTT/frontend/src/App.js"],"sourcesContent":["// src/App.js\nimport React, { useEffect, useState, useRef } from 'react';\nimport { io } from 'socket.io-client';\nimport axios from 'axios';\nimport { Line } from 'react-chartjs-2';\nimport 'chart.js/auto';\n\nconst BACKEND = process.env.REACT_APP_BACKEND || 'http://localhost:4000';\n\nfunction App(){\n  const [live, setLive] = useState(null);\n  const [history, setHistory] = useState([]);\n  const [alerts, setAlerts] = useState([]);\n  const socketRef = useRef();\n\n  useEffect(()=>{\n    // fetch history once\n    axios.get(`${BACKEND}/api/history?limit=200`).then(r=>setHistory(r.data)).catch(console.error);\n    axios.get(`${BACKEND}/api/alerts`).then(r=>setAlerts(r.data)).catch(console.error);\n    // socket\n    socketRef.current = io(BACKEND);\n    socketRef.current.on('sensor_data', data => {\n      setLive(data);\n      setHistory(prev => {\n        const next = [...prev, data];\n        if (next.length > 300) next.shift();\n        return next;\n      });\n    });\n    socketRef.current.on('alert', a => setAlerts(prev=>[a, ...prev].slice(0,50)));\n    return ()=> socketRef.current.disconnect();\n  },[]);\n\n  const temps = history.map(h=>h.temperature || null);\n  const labels = history.map(h=> new Date(h.timestamp).toLocaleTimeString());\n\n  return (\n    <div style={{padding:20,fontFamily:'Arial'}}>\n      <h1>Realâ€‘Time IoT Dashboard</h1>\n      <div style={{display:'flex',gap:20}}>\n        <div style={{flex:1}}>\n          <h3>Live Reading</h3>\n          <pre>{JSON.stringify(live, null, 2)}</pre>\n          <h3>Temperature (last {temps.length} points)</h3>\n          <Line data={{labels, datasets:[{label:'Temperature', data:temps, fill:false}]}} />\n        </div>\n        <div style={{width:320}}>\n          <h3>Alerts</h3>\n          <ul>\n            {alerts.slice(0,20).map((a,i)=>(<li key={i}>{a.message || JSON.stringify(a)}</li>))}\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}